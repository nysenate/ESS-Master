/*! ess - v - 2016-09-07 */function locationService($location, $window, $anchorScroll, appProps) {
    function setSearchParam(paramName, paramValue, condition, replace) {
        var search = $location.search(paramName, condition !== !1 ? paramValue : null);
        replace !== !1 && search.replace();
    }
    function getSearchParam(paramName) {
        return $location.search()[paramName];
    }
    function clearSearchParams() {
        $location.search({});
    }
    function scrollToId(id) {
        $location.hash(id), $anchorScroll();
    }
    function go(path, reload, params) {
        $location.path(appProps.ctxPath + path).search(params ? params : {}), reload === !0 && $window.location.reload();
    }
    return {
        setSearchParam: setSearchParam,
        getSearchParam: getSearchParam,
        clearSearchParams: clearSearchParams,
        scrollToId: scrollToId,
        go: go
    };
}

function promiseUtilsService($q) {
    function serial(tasks) {
        var prevPromise = $q.when();
        return angular.forEach(tasks, function(task) {
            prevPromise = prevPromise ? prevPromise.then(task) : task();
        }), prevPromise;
    }
    return {
        serial: serial
    };
}

function zeroPadFilter() {
    return zeroPad;
}

function zeroPad(number, length) {
    var numberString = "" + number;
    return numberString.length > length ? numberString : (Math.pow(10, length) + "" + numberString).slice(-length);
}

var essCore = angular.module("essCore", []), essApi = angular.module("essApi", [ "essCore" ]), essMyInfo = angular.module("essMyInfo", [ "essApi" ]), essTime = angular.module("essTime", [ "essApi" ]), essSupply = angular.module("essSupply", [ "essApi", "ngCookies" ]), essHelp = angular.module("essHelp", [ "essApi" ]), essApp = angular.module("ess", [ "ngRoute", "ngResource", "ngAnimate", "essMyInfo", "essTime", "essSupply", "essHelp", "floatThead", "angularUtils.directives.dirPagination", "ui.autocomplete", "nsPopover" ]);

essCore.constant("appProps", globalProps), essCore.run([ "$cookies", function($cookies) {
    if (void 0 === $cookies.get("appVersion") || $cookies.get("appVersion") != globalProps.releaseVersion) {
        var cookies = $cookies.getAll();
        angular.forEach(cookies, function(v, k) {
            $cookies.remove(k);
        });
    }
    $cookies.put("appVersion", globalProps.releaseVersion);
} ]), essCore.factory("httpTimeoutChecker", [ "appProps", function(appProps) {
    return {
        request: function(request) {
            if ("true" == globalProps.timeoutExempt) return request;
            var myvar = '<div id="timeout-confirm" title="Inactive Session Timeout">  <p style="padding-left: 35px;padding-top: 10px;"><span class="ui-icon ui-icon-alert" ></span><span style="font-size: large; align-content: center;">Due to inactive, this session is about to timeout in <span id="tick">60</span>  seconds, do you want to continues your work?</span></p></div>';
            $("#timeout-confirm").length <= 0 && $("body").append(myvar), $("#timeout-confirm").hide(), 
            $("#timeout-confirm").dialog(), $("#timeout-confirm").dialog("close");
            var heartBeatingRate = 5, idelTime = 0;
            if (localStorage.setItem("alerted", "false"), null == localStorage.getItem("hb") || window.location.pathname.split("/")[1] != localStorage.getItem("hb").split("/")[1]) {
                localStorage.setItem("hb", window.location.pathname);
                var hb = setInterval(function() {
                    idelTime += heartBeatingRate, $.ajax({
                        type: "GET",
                        url: appProps.apiPath + "/timeout/ping.json?sessionId=" + window.globalProps.sessionId + "&idelTime=" + idelTime,
                        success: function(data) {
                            if (data.message > 0 && "false" == localStorage.getItem("alerted")) {
                                localStorage.setItem("alerted", "true");
                                var tick = 60, ticking = setInterval(function() {
                                    tick >= 0 ? ($("#tick").text(tick), tick -= 1) : $.ajax({
                                        type: "GET",
                                        url: appProps.apiPath + "/timeout/ping.json?sessionId=" + window.globalProps.sessionId + "&idelTime=-1",
                                        success: function(data) {
                                            window.location.replace(appProps.loginUrl), window.location.reload(!0);
                                        }
                                    });
                                }, 1e3);
                                $("#timeout-confirm").dialog({
                                    resizable: !1,
                                    height: 240,
                                    width: 400,
                                    modal: !0,
                                    closeOnEscape: !1,
                                    open: function(event, ui) {
                                        $(".ui-dialog-titlebar-close", ui.dialog | ui).hide(), $(".ui-widget-overlay").attr("style", "position: fixed;top: 0;left: 0; width: 100%;height: 100%; background: #666666 url(ui-bg_diagonals-thick_20_666666_40x40.png) 50% 50% repeat;opacity: .50;filter:Alpha(Opacity=50); ");
                                    },
                                    close: function() {},
                                    buttons: {
                                        Continue: function() {
                                            $.ajax({
                                                type: "GET",
                                                url: appProps.apiPath + "/timeout/ping.json?sessionId=" + window.globalProps.sessionId + "&idelTime=" + idelTime
                                            }), $(this).dialog("close"), idelTime = 0, localStorage.setItem("alerted", "false"), 
                                            tick = 60, clearInterval(ticking);
                                        }
                                    }
                                });
                            }
                        }
                    });
                }, 1e3 * heartBeatingRate);
                $(document).on("change click keydown keypress keyup load  resize scroll select submit", function() {
                    idelTime = 0;
                }), window.onbeforeunload = function(e) {
                    localStorage.removeItem("hb"), clearInterval(hb);
                };
            }
            return request;
        }
    };
} ]), essCore.config([ "$httpProvider", function($httpProvider) {
    $httpProvider.interceptors.push("httpTimeoutChecker");
} ]), essCore.config([ "$routeProvider", "$httpProvider", function($routeProvider, $httpProvider) {
    $httpProvider.defaults.headers.common["Cache-Control"] = "no-cache, no-store, max-age=0, must-revalidate", 
    $httpProvider.defaults.headers.common.Pragma = "no-cache", $httpProvider.defaults.headers.common.Expires = "-1";
} ]);

var essApi = angular.module("essApi");

essApi.factory("PayPeriodApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/periods/:periodType");
} ]), essApi.factory("HolidayApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/holidays");
} ]), essApi.factory("TimeRecordApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/timerecords");
} ]), essApi.factory("ActiveTimeRecordsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/timerecords/active");
} ]), essApi.factory("ActiveYearsTimeRecordsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/timerecords/activeYears");
} ]), essApi.factory("SupervisorTimeRecordsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/timerecords/supervisor");
} ]), essApi.factory("SupervisorTimeRecordCountsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/timerecords/supervisor/count");
} ]), essApi.factory("TimeRecordReminderApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/timerecords/reminder");
} ]), essApi.factory("AttendanceRecordApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/attendance/records");
} ]), essApi.factory("SupervisorEmployeesApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supervisor/employees");
} ]), essApi.factory("SupervisorChainApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supervisor/chain");
} ]), essApi.factory("SupervisorOverridesApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supervisor/overrides");
} ]), essApi.factory("SupervisorGrantsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supervisor/grants");
} ]), essApi.factory("AccrualPeriodApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/accruals");
} ]), essApi.factory("AccrualHistoryApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/accruals/history");
} ]), essApi.factory("EmpInfoApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/employees.json");
} ]), essApi.factory("EmpActiveYearsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/employees/activeDates");
} ]), essApi.factory("EmpActiveYearsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/employees/activeYears");
} ]), essApi.factory("EmpTransactionsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/empTransactions/");
} ]), essApi.factory("EmpTransactionSnapshotApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/empTransactions/snapshot");
} ]), essApi.factory("EmpTransactionCurrentSnapshotApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/empTransactions/snapshot/current");
} ]), essApi.factory("EmpTransactionTimelineApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/empTransactions/timeline");
} ]), essApi.factory("AllowanceApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/allowances");
} ]), essApi.factory("MiscLeaveGrantApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/miscleave/grants");
} ]), essApi.factory("EmpCheckHistoryApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/paychecks.json");
} ]), essApi.factory("LocationApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/locations.json");
} ]), essApi.factory("SupplyItemsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/items.json");
} ]), essApi.factory("SupplyLocationAllowanceApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/location/allowance/:id.json", {
        id: "@id"
    });
} ]), essApi.factory("SupplyDestinationApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/destinations/:empId.json", {
        empId: "@empId"
    });
} ]), essApi.factory("SupplyRequisitionApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/requisitions.json");
} ]), essApi.factory("SupplyRequisitionByIdApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/requisitions/:id.json", {
        id: "@id"
    });
} ]), essApi.factory("SupplyRequisitionHistoryApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/requisitions/history/:id.json", {
        id: "@id"
    });
} ]), essApi.factory("SupplyRequisitionOrderHistoryApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/requisitions/orderHistory.json");
} ]), essApi.factory("SupplyReconciliationApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/reconciliation.json");
} ]), essApi.factory("SupplyEmployeesApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/employees");
} ]), essApi.factory("SupplyLocationStatisticsApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.apiPath + "/supply/statistics/locations.json");
} ]);

var essApp = angular.module("ess");

essApp.directive("essNavigation", [ "$route", "$routeParams", "$location", function($route, $routeParams, $location) {
    return {
        restrict: "A",
        link: function(scope, element, attrs) {
            element.on("click", "ul li.main-topic", function(event) {
                $(this).hasClass("active") || (element.find(".main-topic.active").removeClass("active"), 
                element.find(".sub-topic-list.active").removeClass("active"), $(this).addClass("active"), 
                $(this).next("li").children("ul.sub-topic-list").addClass("active"));
            }), scope.$on("$routeChangeStart", function() {
                element.find(".main-topic.active, .sub-topic-list.active, .sub-topic.active").removeClass("active");
                var $a = element.find(".sub-topic a[href='" + $location.$$path + "']");
                if (1 == $a.length) {
                    var $subTopicLi = $a.parent(), $subTopicUl = $subTopicLi.parent(), $mainTopic = $subTopicUl.parent().prev();
                    $subTopicLi.add($subTopicUl).add($mainTopic).addClass("active");
                }
            });
        }
    };
} ]);

var essApp = angular.module("ess");

essApp.config(function($routeProvider, $locationProvider) {
    var ctxPath = globalProps.ctxPath;
    $routeProvider.when(ctxPath + "/myinfo", {
        redirectTo: ctxPath + "/myinfo/personnel/summary"
    }), $routeProvider.when(ctxPath + "/myinfo/personnel/summary", {
        templateUrl: ctxPath + "/template/myinfo/personnel/summary"
    }), $routeProvider.when(ctxPath + "/myinfo/personnel/transactions", {
        templateUrl: ctxPath + "/template/myinfo/personnel/transactions"
    }), $routeProvider.when(ctxPath + "/myinfo/payroll/checkhistory", {
        templateUrl: ctxPath + "/template/myinfo/payroll/checkhistory"
    }), $routeProvider.when(ctxPath + "/time", {
        redirectTo: ctxPath + "/time/record/entry"
    }), $routeProvider.when(ctxPath + "/time/record/entry", {
        templateUrl: ctxPath + "/template/time/record/entry",
        reloadOnSearch: !1
    }), $routeProvider.when(ctxPath + "/time/record/history", {
        templateUrl: ctxPath + "/template/time/record/history"
    }), $routeProvider.when(ctxPath + "/time/record/emphistory", {
        templateUrl: ctxPath + "/template/time/record/emphistory"
    }), $routeProvider.when(ctxPath + "/time/record/manage", {
        templateUrl: ctxPath + "/template/time/record/manage",
        reloadOnSearch: !1
    }), $routeProvider.when(ctxPath + "/time/record/grant", {
        templateUrl: ctxPath + "/template/time/record/grant"
    }), $routeProvider.when(ctxPath + "/time/period/calendar", {
        templateUrl: ctxPath + "/template/time/period/calendar"
    }), $routeProvider.when(ctxPath + "/time/accrual/history", {
        templateUrl: ctxPath + "/template/time/accrual/history",
        reloadOnSearch: !1
    }), $routeProvider.when(ctxPath + "/time/accrual/projections", {
        templateUrl: ctxPath + "/template/time/accrual/projections"
    }), $routeProvider.when(ctxPath + "/supply", {
        redirectTo: ctxPath + "/supply/order"
    }), $routeProvider.when(ctxPath + "/supply/order", {
        templateUrl: ctxPath + "/template/supply/order",
        reloadOnSearch: !1
    }), $routeProvider.when(ctxPath + "/supply/order/cart", {
        templateUrl: ctxPath + "/template/supply/order/cart",
        resolve: {
            locAutocomplete: [ "SupplyLocationAllowanceService", "SupplyCookieService", function(supplyLocationAllowanceService, supplyCookieService) {
                return null !== supplyCookieService.getDestination() ? supplyLocationAllowanceService.queryLocationAllowance(supplyCookieService.getDestination()) : void 0;
            } ]
        }
    }), $routeProvider.when(ctxPath + "/supply/manage/fulfillment", {
        templateUrl: ctxPath + "/template/supply/manage/fulfillment",
        resolve: {
            locAutocomplete: [ "SupplyLocationAutocompleteService", function(locAutoService) {
                return locAutoService.initWithAllLocations();
            } ]
        }
    }), $routeProvider.when(ctxPath + "/supply/manage/reconciliation", {
        templateUrl: ctxPath + "/template/supply/manage/reconciliation"
    }), $routeProvider.when(ctxPath + "/supply/history/history", {
        templateUrl: ctxPath + "/template/supply/history/history"
    }), $routeProvider.when(ctxPath + "/supply/order-history", {
        templateUrl: ctxPath + "/template/supply/order-history"
    }), $routeProvider.when(ctxPath + "/supply/requisition/requisition-view", {
        templateUrl: ctxPath + "/template/supply/requisition/requisition-view"
    }), $routeProvider.when(ctxPath + "/help/ta/plan", {
        templateUrl: ctxPath + "/template/help/ta/plan"
    }), $routeProvider.otherwise({
        templateUrl: ctxPath + "/template/404"
    }), $locationProvider.html5Mode(!0), $locationProvider.hashPrefix("!");
}), essApp.animation(".view-animate", function() {
    return {
        enter: function(element, done) {
            return element.hide(), element.delay(150).fadeIn(300, done), function() {
                element.stop();
            };
        },
        leave: function(element, done) {
            return element.fadeOut(100, done), function() {
                element.stop();
            };
        }
    };
});

var essApp = angular.module("ess");

essApp.controller("MainCtrl", [ "$scope", "$http", "$route", "$routeParams", "$location", function($scope, $http, $route, $routeParams, $location) {
    $scope.$route = $route, $scope.$location = $location, $scope.$routeParams = $routeParams;
} ]);

var essApp = angular.module("ess");

essApp.directive("togglePanel", [ function() {
    return {
        restrict: "E",
        scope: {
            label: "@",
            extraClasses: "@",
            callback: "&",
            renderClosed: "@"
        },
        replace: !0,
        transclude: !0,
        template: '<div class="content-container {{extraClasses}}" ng-class="{\'open\': open}">   <h1 class="toggle-panel-label" ng-click="toggle()">{{label}}</h1>   <div ng-if="opened || renderClosed" ng-show="open" class="panel-content" ng-cloak ng-transclude></div></div>',
        link: function($scope, $element, $attrs) {
            $scope.opened = !1, $scope.toggle = function() {
                $scope.open = !$scope.open, $scope.callback && $scope.callback($scope.open);
            }, $scope.renderClosed = "true" == $scope.renderClosed, $scope.$watch($attrs.open, function(open) {
                $scope.open = open;
            }), $scope.$watch($attrs.showTip, function(showTip) {
                $scope.showTip = showTip;
            }), $scope.$watch("open", function(newOpen, oldOpen) {
                var panelElem = $element.children(".panel-content");
                newOpen ? panelElem.slideDown(200) : panelElem.slideUp(200), $scope.opened = newOpen || $scope.opened;
            });
        }
    };
} ]);

var essApp = angular.module("ess");

essApp.factory("PaginationModel", function() {
    return {
        firstPage: 1,
        currPage: 1,
        lastPage: 1,
        itemsPerPage: 6,
        totalItems: 0,
        setTotalItems: function(totalResults) {
            this.totalItems = totalResults, this.lastPage = Math.ceil(this.totalItems / this.itemsPerPage), 
            this.currPage > this.lastPage && (this.currPage = 1);
        },
        reset: function() {
            this.currPage = 1;
        },
        needsPagination: function() {
            return this.totalItems > this.itemsPerPage;
        },
        getOffset: function() {
            return this.itemsPerPage * (this.currPage - 1) + 1;
        },
        getLimit: function() {
            return this.itemsPerPage;
        },
        nextPage: function() {
            this.currPage += 1;
        },
        hasNextPage: function() {
            return this.currPage < this.lastPage;
        },
        prevPage: function() {
            this.currPage = Math.max(this.currPage - 1, 0);
        },
        hasPrevPage: function() {
            return this.currPage > this.firstPage;
        },
        toLastPage: function() {
            this.currPage = this.lastPage;
        },
        toFirstPage: function() {
            this.currPage = this.firstPage;
        }
    };
});

var essApp = angular.module("ess");

essApp.directive("essNotification", [ function() {
    return {
        restrict: "AE",
        scope: {
            level: "@",
            title: "@",
            message: "@",
            dialog: "@",
            dialogShow: "@"
        },
        transclude: !0,
        template: '<div class="ess-notification {{level}}"><h2 ng-if="title" ng-bind="title"></h2><p ng-if="message" ng-bind="message"></p><ng-transclude></ng-transclude></div>',
        link: function(scope, element, attrs) {
            "true" === scope.dialog && ($elem = jQuery(element), $elem && $elem.dialog({
                autoOpen: !1,
                height: "auto",
                width: "auto",
                modal: !0
            }), scope.$watch("dialogShow", function(newVal, oldVal) {
                "true" === newVal && $elem.dialog("open");
            }));
        }
    };
} ]);

var essApp = angular.module("ess");

essApp.directive("loaderIndicator", [ function() {
    return {
        restrict: "A",
        template: '<div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div>',
        link: function(scope, element, attrs) {}
    };
} ]);

var essApp = angular.module("ess");

essApp.directive("odometer", [ function() {
    return {
        restrict: "AE",
        scope: {
            duration: "=odometerDuration",
            format: "=odometerFormat",
            value: "@value"
        },
        link: function($scope, element, attrs) {
            var od = new Odometer({
                el: element[0],
                value: $scope.value || 0,
                animation: "count",
                duration: $scope.duration || 500,
                format: $scope.format || "(,ddd).dd"
            });
            attrs.$observe("value", function(val) {
                od.update(val);
            });
        }
    };
} ]);

var essApp = angular.module("ess");

essApp.directive("datepicker", [ function() {
    return {
        restrict: "AE",
        scope: {
            stepMonths: "@",
            inline: "@",
            defaultDate: "@",
            beforeShowDay: "&?",
            fromDate: "=?",
            toDate: "=?"
        },
        link: function($scope, $element, $attrs) {
            function validDay(date) {
                return $scope.fromDate ? !moment($scope.fromDate).isAfter(date) : $scope.toDate ? !moment($scope.toDate).isBefore(date) : !0;
            }
            function beforeShowDay(date) {
                var beforeShowDayResult = [ !0 ];
                return "function" == typeof customBeforeShowDay && (beforeShowDayResult = customBeforeShowDay(date)), 
                beforeShowDayResult[0] = beforeShowDayResult[0] && validDay(date), beforeShowDayResult;
            }
            var defaultDate = $scope.defaultDate ? $scope.defaultDate : new Date(), customBeforeShowDay = void 0;
            "function" == typeof $scope.beforeShowDay && (customBeforeShowDay = $scope.beforeShowDay()), 
            $element.datepicker({
                showOn: "button",
                buttonImage: "/assets/img/calendar.png",
                buttonImageOnly: !0,
                inline: $scope.inline || !1,
                stepMonths: $scope.stepMonths || 1,
                defaultDate: defaultDate,
                beforeShowDay: beforeShowDay
            }), "false" === $scope.stepMonths && $element.find(".ui-datepicker-prev, .ui-datepicker-next").remove();
        }
    };
} ]);

var essApp = angular.module("ess");

essApp.filter("moment", [ "$filter", function($filter) {
    return function(input, format, defaultVal) {
        return input ? moment(input).format(format) : "undefined" != typeof defaultVal ? defaultVal : "--";
    };
} ]), essApp.filter("momentFromNow", function() {
    return function(input, suffix, defaultVal) {
        return suffix = suffix === !0, input ? moment(input).fromNow(suffix) : "undefined" != typeof defaultVal ? defaultVal : "--";
    };
}), essApp.filter("momentCmp", function() {
    return function(lhs, operator, rhs, precision) {
        switch ("now" === rhs && (rhs = moment()), operator) {
          case "eq":
          case "=":
            return moment(lhs).isSame(rhs, precision);

          case "gt":
          case ">":
            return moment(lhs).isAfter(rhs, precision);

          case "lt":
          case "<":
            return moment(lhs).isBefore(rhs, precision);

          default:
            return !1;
        }
    };
}), essApp.filter("momentIsDOW", function() {
    return function(date, daysOfWeek) {
        return daysOfWeek.constructor !== Array && (daysOfWeek = [ daysOfWeek ]), daysOfWeek.indexOf(moment(date).day()) >= 0;
    };
});

var essApp = angular.module("ess");

essApp.filter("not", function() {
    return function(input) {
        return !input;
    };
});

var essApp = angular.module("ess");

essApp.service("modals", [ "$rootScope", "$q", function($rootScope, $q) {
    function open(type, params, softRejectable) {
        var modal = {
            deferred: $q.defer(),
            params: params,
            softRejectable: softRejectable === !0
        };
        return $rootScope.$emit("modals.open", type), modals.push(modal), modal.deferred.promise;
    }
    function params() {
        var modal = modals[modals.length - 1];
        return modal ? modal.params || {} : {};
    }
    function reject(reason) {
        var modal = modals.pop();
        modal && (modal.deferred.reject(reason), $rootScope.$emit("modals.close"));
    }
    function rejectAll(reason) {
        for (;modals.length > 0; ) reject(reason);
    }
    function softReject(reason) {
        var modal = modals[modals.length - 1];
        modal && modal.softRejectable && reject(reason);
    }
    function resolve(response) {
        var modal = modals.pop();
        modal && (modal.deferred.resolve(response), $rootScope.$emit("modals.close"));
    }
    var modals = [];
    return {
        open: open,
        params: params,
        reject: reject,
        rejectAll: rejectAll,
        softReject: softReject,
        resolve: resolve
    };
} ]);

var essApp = angular.module("ess");

essApp.directive("modalContainer", [ "$rootScope", "$document", "modals", function($rootScope, $document, modals) {
    function link($scope, $element) {
        function updateTop() {
            $scope.top = $scope.openModals[$scope.openModals.length - 1], $scope.top ? lockScrollbar() : unlockScrollbar();
        }
        function lockScrollbar() {
            var rootEle = angular.element("html");
            rootEle.addClass("overflow-hidden");
        }
        function unlockScrollbar() {
            var rootEle = angular.element("html");
            rootEle.removeClass("overflow-hidden");
        }
        $scope.openModals = [], $scope.top = null, $scope.isOpen = function(viewName) {
            return $scope.openModals.indexOf(viewName) >= 0;
        };
        var backDropEle = $element.find("#modal-backdrop")[0];
        backDropEle.onclick = function(event) {
            backDropEle === event.target && $scope.$apply(modals.softReject);
        }, $document.bind("keyup", function(event) {
            27 === event.keyCode && $scope.$apply(modals.softReject);
        }), $rootScope.$on("modals.open", function(event, modalType) {
            $scope.openModals.push(modalType), updateTop();
        }), $rootScope.$on("modals.close", function(event) {
            $scope.openModals.pop(), updateTop();
        });
    }
    return {
        template: '<div id="modal-container" ng-show="top">  <div id="modal-backdrop"></div>  <div id="common-modals">    <div internal-error-modal ng-if="isOpen(\'500\')"></div>  </div>  <ng-transclude></ng-transclude></div>',
        transclude: !0,
        link: link
    };
} ]), essApp.directive("modal", function() {
    return {
        scope: {
            viewName: "@",
            isOpen: "&"
        },
        transclude: !0,
        template: '<div class="modal" ng-if="isOpen(\'record-details\')" ng-class="{\'background-modal\': top !== viewName}">  <ng-transclude></ng-transclude></div>',
        link: function($scope) {}
    };
});

var essApp = angular.module("ess");

essApp.directive("internalErrorModal", [ "modals", function(modals) {
    return {
        template: '<section id="internal-error-modal" title="Internal Error"><h1>Internal Error</h1><p class="internal-error-text">We are sorry to report that an error occurred on the ESS server while processing your request.<br>Please contact the STS Help Line at (518) 455-2011 and notify us of this issue so that we can fix it!</p><pre class="internal-error-details" ng-show="showDetails">{{details | json}}</pre><div class="button-container"><input type="button" class="reject-button" ng-click="showDetails = !showDetails" value="{{showDetails ? \'Hide\' : \'Show\'}} Details"/><input type="button" class="reject-button" ng-click="close()" value="OK"/></div></section>',
        link: function($scope, $element, $attrs) {
            $scope.showDetails = !1, $scope.details = modals.params().details, $scope.close = modals.reject;
        }
    };
} ]), angular.module("ess").service("LocationService", [ "$location", "$window", "$anchorScroll", "appProps", locationService ]);

var essApp = angular.module("ess");

essApp.factory("badgeService", [ "appProps", function(appProps) {
    var badgeService = {
        badges: {}
    };
    return badgeService.setBadgeValue = function(badgeId, value) {
        badgeService.badges[badgeId] = value;
    }, badgeService;
} ]);

var essApp = angular.module("ess");

essApp.directive("badge", [ "$rootScope", "badgeService", function($rootScope, badgeService) {
    return {
        restrict: "AE",
        scope: {
            badgeId: "&",
            hideEmpty: "&"
        },
        template: '<div class="badge" ng-if="!hideEmpty || badgeValue">{{badgeValue}}</div>',
        link: function($scope, element, attrs) {
            $scope.$watch(function() {
                return badgeService.badges[attrs.badgeId];
            }, function(newVal) {
                $scope.badgeValue = newVal;
            });
        }
    };
} ]);

var essApp = angular.module("ess");

essApp.filter("activeInactive", function() {
    return function(input) {
        return "A" === input || "a" === input ? "Active" : "Inactive";
    };
});

var essApp = angular.module("ess");

essApp.directive("textAutoHeight", [ "$timeout", function($timeout) {
    return {
        restrict: "A",
        scope: {
            text: "="
        },
        link: function($scope, $elem, $attrs) {
            $timeout(function() {
                var minHeight = $elem[0].offsetHeight, paddingLeft = parseInt($elem.css("paddingLeft")) || 0, paddingRight = parseInt($elem.css("paddingRight")) || 0, $shadow = angular.element("<div></div>").css({
                    position: "absolute",
                    top: -1e4,
                    left: -1e4,
                    width: $elem[0].offsetWidth - paddingLeft - paddingRight,
                    fontSize: $elem.css("fontSize"),
                    fontFamily: $elem.css("fontFamily"),
                    lineHeight: $elem.css("lineHeight"),
                    resize: "none"
                });
                $scope.$watch(function() {
                    return $elem[0].offsetWidth;
                }, function(newWidth, oldWidth) {
                    newWidth !== oldWidth && $timeout(function() {
                        var paddingLeft = parseInt($elem.css("paddingLeft")) || 0, paddingRight = parseInt($elem.css("paddingRight")) || 0;
                        $shadow.css("width", newWidth - paddingLeft - paddingRight);
                    }, 50);
                }), angular.element(document.body).append($shadow);
                var update = function() {
                    var times = function(string, number) {
                        for (var i = 0, r = ""; number > i; i++) r += string;
                        return r;
                    }, val = $elem.val().replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/&/g, "&amp;").replace(/\n$/, "<br/>&nbsp;").replace(/\n/g, "<br/>").replace(/\s{2,}/g, function(space) {
                        return times("&nbsp;", space.length - 1) + " ";
                    });
                    $shadow.html(val), $elem.css("height", Math.max($shadow[0].offsetHeight + 10, minHeight) + "px");
                };
                $elem.bind("keyup keydown keypress change", update), update();
            }, 100);
        }
    };
} ]);

var essApp = angular.module("ess");

essApp.filter("round", function() {
    return function(number, multiple, direction) {
        multiple = Math.abs(multiple || 1), direction = isNaN(direction) ? 0 : direction;
        var roundingFunction = Math.round;
        direction > 0 ? roundingFunction = Math.ceil : 0 > direction && (roundingFunction = Math.floor);
        var inverse = 1 / multiple;
        return roundingFunction(number * inverse) / inverse;
    };
}), angular.module("ess").directive("errSrc", function() {
    return {
        link: function(scope, element, attrs) {
            element.bind("error", function() {
                attrs.src != attrs.errSrc && attrs.$set("src", attrs.errSrc);
            });
        }
    };
}), angular.module("ess").service("promiseUtils", [ "$q", promiseUtilsService ]), 
angular.module("ess").filter("zeroPad", zeroPadFilter);