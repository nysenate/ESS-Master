/*! ess - v - 2018-04-23 */
var loginApp = angular.module("essLogin", [ "ngResource" ]);

angular.module("ess", [ "essLogin" ]), loginApp.constant("appProps", globalProps), 
loginApp.factory("LoginApi", [ "$resource", "appProps", function($resource, appProps) {
    return $resource(appProps.ctxPath + appProps.loginUrl, {}, {
        login: {
            method: "POST",
            headers: {
                Accept: "application/json",
                "Content-Type": "application/x-www-form-urlencoded"
            },
            withCredentials: !0
        }
    });
} ]), loginApp.controller("LoginController", [ "$scope", "$http", "$window", "appProps", "LoginApi", function($scope, $http, $window, appProps, LoginApi) {
    $scope.credentials = {
        username: "",
        password: "",
        rememberMe: !1
    }, $scope.activeView = 1, $scope.showError = !1, $scope.errorFields = {
        username: !1,
        password: !1,
        reset: function() {
            this.username = !1, this.password = !1;
        }
    }, $scope.errorMessage = "", $scope.loginInProgress = !1, $scope.isActiveView = function(index) {
        return this.activeView === index;
    }, $scope.setActiveView = function(index) {
        this.activeView = index;
    }, $scope.validate = function() {
        if ($scope.errorFields.reset(), $scope.showError = !1, $scope.credentials.username) {
            if ($scope.credentials.password) return !0;
            $scope.errorMessage = "Please enter your password.", $scope.errorFields.password = !0;
        } else $scope.errorMessage = "Please enter your username.", $scope.errorFields.username = !0;
        return $scope.showError = !0, !1;
    }, $scope.login = function() {
        $scope.validate() && ($scope.loginInProgress = !0, LoginApi.login($.param($scope.credentials), function(authResponse, status) {
            authResponse && (!0 === authResponse.authenticated ? $window.location.href = authResponse.redirectUrl : ($scope.errorMessage = authResponse.message, 
            $scope.showError = !0, "UNKNOWN_ACCOUNT" == authResponse.status ? $scope.errorFields.username = !0 : "INCORRECT_CREDENTIALS" == authResponse.status && ($scope.errorFields.password = !0), 
            $scope.loginInProgress = !1));
        }, function(data) {
            $scope.loginInProgress = !1, alert("There was an issue logging in. Please try again.");
        }));
    };
} ]);

var essApp = angular.module("ess");

essApp.directive("essNotification", [ function() {
    return {
        restrict: "AE",
        scope: {
            level: "@",
            title: "@",
            message: "@",
            dialog: "@",
            dialogShow: "@"
        },
        transclude: !0,
        template: '<div class="ess-notification {{level}}"><h2 ng-if="title" ng-bind="title"></h2><p ng-if="message" ng-bind="message"></p><ng-transclude></ng-transclude></div>',
        link: function(scope, element, attrs) {
            "true" === scope.dialog && ($elem = jQuery(element), $elem && $elem.dialog({
                autoOpen: !1,
                height: "auto",
                width: "auto",
                modal: !0
            }), scope.$watch("dialogShow", function(newVal, oldVal) {
                "true" === newVal && $elem.dialog("open");
            }));
        }
    };
} ]);
//# sourceMappingURL=ess-login.min.js.map